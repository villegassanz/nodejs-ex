<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8">
  <title>My Aplicaci√≥n con Sockets</title>
  <script src="/socket.io/socket.io.js"></script>
  <script>
	var socket = io.connect('http://nodejs1-proyectov9.44fs.preview.openshiftapps.com:8080', { 'forceNew': true });

	socket.on('messages', function(data) {  
	console.log(data);
	render(data);
})
	
	function prueba(){
		var message = {
			id_autobus: document.getElementById('id_autobus').value,
			rfc: document.getElementById('rfc').value,
			ruta: document.getElementById('ruta').value,
			eje:document.getElementById('ejemplo').value,
			//lat:document.getElementById('latitud').value,
			//lon:doc.getElementById('longitud').value,
			//fecha:doc.getElementById('fecha').value,
			//horai:doc.getElementById('hora inicio').value,
			//horaf:doc.getElementById('hora fin').value
		};
			socket.emit('new-message', message);
		return false;
	}
	
	function render (data) {  
		var html = data.map(function(elem, index) {
		return(`<div>
              <strong>${elem.id_autobus}</strong>:
              <strong>${elem.rfc}</strong>
			  <strong>${elem.ruta}</strong>
            </div>`);
		}).join(" ");

		document.getElementById('messages').innerHTML = html;
}
  </script>
</head>  
<body>  
  <h1>My App</h1>
  <div id="messages"></div>
  <br/>
    <input type="text" id="id_autobus" placeholder="Identificador" >
	<input type="text" id="rfc" placeholder="RFC" >
    <input type="text" id="ruta" placeholder="Ruta">
	<input type="text" id="ejemplo" placeholder="ejemplo">
    <button id="btn1" onclick="prueba()">Enviar</button>
</body>  
</html>